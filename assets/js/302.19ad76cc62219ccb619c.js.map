{"version":3,"sources":["webpack://sbs/./src/lineup/index.module.css?030c","webpack://sbs/./src/lineup/index.js","webpack://sbs/./src/stats/index.module.css?e8a4","webpack://sbs/./src/stats/index.js","webpack://sbs/./src/index.js"],"names":["id","fetch","res","json","code","data","Error","EventDisplay","PlayerEvent","type","time","className","css","Player","player","number","name","events","map","event","idx","StatsDisplay","urlSearchParams","URLSearchParams","location","search","Object","fromEntries","entries","home","away","Widget","useState","lineup","setLineup","useEffect","fetchLineup","then","homeStarters","players","filter","starter","awayStarters","homeSubstitutes","awaySubstitutes","formation","style","backgroundImage","bgLine","bgNoise","left","coord","top","backgroundColor","i","stats","setStats","focus","setFocus","blur","window","addEventListener","removeEventListener","refresh","fetchStats","timer","setInterval","clearInterval","record","main","$root","document","getElementById","render","console","log","app"],"mappings":"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","file":"assets/js/302.19ad76cc62219ccb619c.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_16tdTqdvwtqzIOLvOMFS4d\",\"team\":\"_2BGoVg1vijuec-JrBJRfpC\",\"teamName\":\"_3BDOZJlEkZaTbFnD1ZFmO-\",\"lineup\":\"tOA17Xk0uAU_ux9yxCr4b\",\"ftField\":\"_1bCDHO203N2PWbzO0pre_t\",\"ftFieldStripes\":\"_3cPJ6aSZ5sZqUnKcvKFJE_\",\"ftFieldOverlay\":\"_1puzrzW_jIr_VKww9m8QPt\",\"ftFieldNoise\":\"_3IfDcWv0wN0gz28cSQgAza\",\"ftFieldLine\":\"_3YNZ2EpK_IoUr__URtiEpn\",\"player\":\"_3qGIjkCLQYtWUUYQw1EGds\",\"playerNumber\":\"_2V08M_4cOnutXXhQt1HX8D\",\"playerName\":\"_3fdDESBOxZYkva0aIWsOQT\",\"playerList\":\"_2oQviHYW3OynnD9Lu62jAo\",\"playerListTitle\":\"_16ZIB4ghG_J98BXcKAt76h\",\"playerTeams\":\"_3EUdaXzM5Y8QB4OR6B8VXH\",\"playerTeam\":\"_1TgAsDxfGsolr2ENYn2jgw\",\"playerTeamName\":\"_3t8OgVFv7zw68oGnUWHJ2B\",\"playerItem\":\"_1YFJ153ez3mftiftc_hI0S\",\"playerItemNumber\":\"_3Tw9S3rYVr43kDKi8-IyLl\",\"playerItemName\":\"_1_wj7GSMCLtbyQZ42hD6OD\",\"playerEvents\":\"lmLIYWWJeZkcN1eHzrycF\",\"playerEvent\":\"_3zUdX1hmN-A2Ey7WhPqhH8\",\"playerEventName\":\"_3yI0_0gyj_FLjEsD7xKaTr\",\"playerEventTime\":\"_2aAgP1_Pq82J6qPpBFL0nn\"};","import { useState, useEffect } from 'react'\nimport css from './index.module.css'\nimport bgLine from './line.svg'\nimport bgNoise from './noise.png'\n\nasync function fetchLineup(id) {\n  const res = await fetch(`https://sbd.vercel.app/api?type=lineup&id=${id}`)\n  const { code, data } = await res.json()\n  if (code !== 'SBD0000') throw new Error(code)\n  return data\n}\n\nconst EventDisplay = { 1: '进', 3: '黄', 9: '换', 18: '助' }\n\nfunction PlayerEvent({ type, time }) {\n  return (\n    <div className={css.playerEvent}>\n      <div className={css.playerEventName}>{EventDisplay[type] ?? type}</div>\n      <div className={css.playerEventTime}>{time}</div>\n    </div>\n  )\n}\n\nfunction Player({ player }) {\n  return (\n    <div className={css.playerItem}>\n      <div className={css.playerItemNumber}>{player.number}</div>\n      <div className={css.playerItemName}>{player.name}</div>\n      <div className={css.playerEvents}>\n        {player.events.map((event, idx) => (\n          <PlayerEvent key={idx} {...event} />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default function Lineup({ id, home = '主队', away = '客队' }) {\n  const [lineup, setLineup] = useState()\n\n  useEffect(() => {\n    fetchLineup(id).then(data => setLineup(data))\n  }, [id])\n\n  if (!lineup) return null\n\n  const homeStarters = lineup.home.players.filter(player => player.starter)\n  const awayStarters = lineup.away.players.filter(player => player.starter)\n  const homeSubstitutes = lineup.home.players.filter(player => !player.starter)\n  const awaySubstitutes = lineup.away.players.filter(player => !player.starter)\n  return (\n    <div className={css.container}>\n      <div className={css.team}>\n        <div className={css.teamName}>{home}</div>\n        <div className={css.formation}>{lineup.home.formation}</div>\n      </div>\n      <div className={css.lineup}>\n        <div className={css.ftField}>\n          <div className={css.ftFieldStripes}></div>\n          <div className={css.ftFieldOverlay}></div>\n          <div\n            className={css.ftFieldLine}\n            style={{ backgroundImage: `url(${bgLine})` }}\n          ></div>\n          <div\n            className={css.ftFieldNoise}\n            style={{ backgroundImage: `url(${bgNoise})` }}\n          ></div>\n        </div>\n        {homeStarters.map((player, idx) => (\n          <div\n            key={idx}\n            className={css.player}\n            style={{\n              left: `${player.coord[0]}%`,\n              top: `${player.coord[1] / 2}%`\n            }}\n          >\n            <div\n              className={css.playerNumber}\n              style={{ backgroundColor: '#ff4125' }}\n            >\n              {player.number}\n            </div>\n            <div className={css.playerName}>{player.name}</div>\n          </div>\n        ))}\n        {awayStarters.map((player, idx) => (\n          <div\n            key={idx}\n            className={css.player}\n            style={{\n              left: `${player.coord[0]}%`,\n              top: `${50 + player.coord[1] / 2}%`\n            }}\n          >\n            <div\n              className={css.playerNumber}\n              style={{ backgroundColor: '#94000e' }}\n            >\n              {player.number}\n            </div>\n            <div className={css.playerName}>{player.name}</div>\n          </div>\n        ))}\n      </div>\n      <div className={css.team}>\n        <div className={css.teamName}>{away}</div>\n        <div className={css.formation}>{lineup.away.formation}</div>\n      </div>\n      <div className={css.playerList}>\n        <div className={css.playerListTitle}>先发阵容</div>\n        <div className={css.playerTeams}>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{home}</div>\n            {homeStarters.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{away}</div>\n            {awayStarters.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className={css.playerList}>\n        <div className={css.playerListTitle}>替补阵容</div>\n        <div className={css.playerTeams}>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{home}</div>\n            {homeSubstitutes.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{away}</div>\n            {awaySubstitutes.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2pvKLiFn-iLVe9pnvZ_K9a\",\"sectionTitle\":\"g7ZliVobjlOy1SXsXBJCT\",\"stats\":\"_3bFW3nGeQlQ5KF_HP6vI80\",\"statsItem\":\"NMemiS9pyL8Vx_6Y_OBJy\",\"statsItemTitle\":\"_1FhCKYQqGqqsUHIZHg_pJj\",\"statsItemValue\":\"G9wz1A0LfSPB3F8Zgpq0M\",\"events\":\"_28cCZPak3cuc1B1osMFLRZ\",\"event\":\"g9ggkPrx7JZ7HOYpUkHne\",\"eventTitle\":\"Nkb3OvcsJQvKnvQD64uwe\",\"eventMessage\":\"_3KBwN7J4OT2XXI77lqpLwz\"};","import { useState, useEffect } from 'react'\nimport css from './index.module.css'\n\nasync function fetchStats(id) {\n  const res = await fetch(`https://sbd.vercel.app/api?type=stats&id=${id}`)\n  const { code, data } = await res.json()\n  if (code !== 'SBD0000') throw new Error(code)\n  return data\n}\n\nconst StatsDisplay = {\n  2: '角球',\n  3: '黄卡',\n  4: '红卡',\n  8: '罚点球',\n  21: '射正球门',\n  22: '射偏球门',\n  23: '进攻',\n  24: '危险进攻',\n  25: '控球率'\n}\n\nconst EventDisplay = {\n  1: 'Goal!',\n  2: '角球',\n  3: '黄卡',\n  9: '换人',\n  10: '比赛开始',\n  11: '中场',\n  12: '比赛结束',\n  16: '罚点球',\n  17: 'OwnGoals',\n  18: '助攻'\n}\n\nexport default function Stats({ id }) {\n  const [stats, setStats] = useState()\n  const [focus, setFocus] = useState(true)\n\n  useEffect(() => {\n    const focus = () => setFocus(true)\n    const blur = () => setFocus(false)\n    window.addEventListener('focus', focus)\n    window.addEventListener('blur', blur)\n    return () => {\n      window.removeEventListener('focus', focus)\n      window.removeEventListener('blur', blur)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!focus) return\n    const refresh = () => fetchStats(id).then(data => setStats(data))\n    refresh()\n    const timer = setInterval(refresh, 60000)\n    return () => clearInterval(timer)\n  }, [focus, id])\n\n  if (!stats) return null\n\n  return (\n    <div className={css.container}>\n      <div className={css.sectionTitle}>数据</div>\n      <div className={css.stats}>\n        {stats.stats.map(record => (\n          <div key={record.type} className={css.statsItem}>\n            <div className={css.statsItemTitle}>\n              {StatsDisplay[record.type]}\n            </div>\n            <div className={css.statsItemValue}>\n              {`${record.home}:${record.away}`}\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className={css.sectionTitle}>文字直播</div>\n      <div className={css.events}>\n        {stats.events.map((event, idx) => (\n          <div key={idx} className={css.event}>\n            {!!event.main && (\n              <div className={css.eventTitle}>\n                {EventDisplay[event.type] ?? event.type}\n              </div>\n            )}\n            <div className={css.eventMessage}>{event.data}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","import { render } from 'react-dom'\nimport Lineup from './lineup'\nimport Stats from './stats'\nimport './index.css'\n\nconst urlSearchParams = new URLSearchParams(location.search)\nconst { type, id, home, away } = Object.fromEntries(urlSearchParams.entries())\n\nif (type && id) {\n  const Widget = type === 'lineup' ? Lineup : type === 'stats' ? Stats : null\n  if (Widget) {\n    const $root = document.getElementById('root')\n    render(<Widget id={id} home={home} away={away} />, $root)\n  }\n}\n\n/* eslint-disable-next-line no-console */\nconsole.log(`${app.env.NAME} - ${app.env.REVISION}`)\n"],"sourceRoot":""}