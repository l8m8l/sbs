{"version":3,"sources":["webpack://sbs/./src/lineup/index.module.css?030c","webpack://sbs/./src/lineup/index.jsx","webpack://sbs/./src/index.js"],"names":["id","fetch","res","json","code","data","Error","EventDisplay","PlayerEvent","type","time","className","css","Player","player","number","name","events","map","event","idx","urlSearchParams","URLSearchParams","location","search","Object","fromEntries","entries","home","away","Widget","useState","lineup","setLineup","useEffect","fetchLineup","then","homeStarters","players","filter","starter","awayStarters","homeSubstitutes","awaySubstitutes","formation","style","backgroundImage","bgLine","bgNoise","left","coord","top","backgroundColor","i","$root","document","getElementById","render","console","log","app"],"mappings":"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","file":"assets/js/97.ef3737b3e73425f3d862.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_16tdTqdvwtqzIOLvOMFS4d\",\"team\":\"_2BGoVg1vijuec-JrBJRfpC\",\"teamName\":\"_3BDOZJlEkZaTbFnD1ZFmO-\",\"lineup\":\"tOA17Xk0uAU_ux9yxCr4b\",\"ftField\":\"_1bCDHO203N2PWbzO0pre_t\",\"ftFieldStripes\":\"_3cPJ6aSZ5sZqUnKcvKFJE_\",\"ftFieldOverlay\":\"_1puzrzW_jIr_VKww9m8QPt\",\"ftFieldNoise\":\"_3IfDcWv0wN0gz28cSQgAza\",\"ftFieldLine\":\"_3YNZ2EpK_IoUr__URtiEpn\",\"player\":\"_3qGIjkCLQYtWUUYQw1EGds\",\"playerNumber\":\"_2V08M_4cOnutXXhQt1HX8D\",\"playerName\":\"_3fdDESBOxZYkva0aIWsOQT\",\"playerList\":\"_2oQviHYW3OynnD9Lu62jAo\",\"playerListTitle\":\"_16ZIB4ghG_J98BXcKAt76h\",\"playerTeams\":\"_3EUdaXzM5Y8QB4OR6B8VXH\",\"playerTeam\":\"_1TgAsDxfGsolr2ENYn2jgw\",\"playerTeamName\":\"_3t8OgVFv7zw68oGnUWHJ2B\",\"playerItem\":\"_1YFJ153ez3mftiftc_hI0S\",\"playerItemNumber\":\"_3Tw9S3rYVr43kDKi8-IyLl\",\"playerItemName\":\"_1_wj7GSMCLtbyQZ42hD6OD\",\"playerEvents\":\"lmLIYWWJeZkcN1eHzrycF\",\"playerEvent\":\"_3zUdX1hmN-A2Ey7WhPqhH8\",\"playerEventName\":\"_3yI0_0gyj_FLjEsD7xKaTr\",\"playerEventTime\":\"_2aAgP1_Pq82J6qPpBFL0nn\"};","import { useState, useEffect } from 'react'\nimport css from './index.module.css'\nimport bgLine from './line.svg'\nimport bgNoise from './noise.png'\n\nasync function fetchLineup(id) {\n  const res = await fetch(`https://sbd.vercel.app/api?type=lineup&id=${id}`)\n  const { code, data } = await res.json()\n  if (code !== 'SBD0000') throw new Error(code)\n  return data\n}\n\nconst EventDisplay = { 1: '进', 3: '黄', 9: '换', 18: '助' }\n\nfunction PlayerEvent({ type, time }) {\n  return (\n    <div className={css.playerEvent}>\n      <div className={css.playerEventName}>{EventDisplay[type] ?? type}</div>\n      <div className={css.playerEventTime}>{time}</div>\n    </div>\n  )\n}\n\nfunction Player({ player }) {\n  return (\n    <div className={css.playerItem}>\n      <div className={css.playerItemNumber}>{player.number}</div>\n      <div className={css.playerItemName}>{player.name}</div>\n      <div className={css.playerEvents}>\n        {player.events.map((event, idx) => (\n          <PlayerEvent key={idx} {...event} />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default function Lineup({ id, home = '主队', away = '客队' }) {\n  const [lineup, setLineup] = useState()\n\n  useEffect(() => {\n    fetchLineup(id).then(data => {\n      setLineup(data)\n    })\n  }, [id])\n\n  if (!lineup) return null\n\n  const homeStarters = lineup.home.players.filter(player => player.starter)\n  const awayStarters = lineup.away.players.filter(player => player.starter)\n  const homeSubstitutes = lineup.home.players.filter(player => !player.starter)\n  const awaySubstitutes = lineup.away.players.filter(player => !player.starter)\n  return (\n    <div className={css.container}>\n      <div className={css.team}>\n        <div className={css.teamName}>{home}</div>\n        <div className={css.formation}>{lineup.home.formation}</div>\n      </div>\n      <div className={css.lineup}>\n        <div className={css.ftField}>\n          <div className={css.ftFieldStripes}></div>\n          <div className={css.ftFieldOverlay}></div>\n          <div\n            className={css.ftFieldLine}\n            style={{ backgroundImage: `url(${bgLine})` }}\n          ></div>\n          <div\n            className={css.ftFieldNoise}\n            style={{ backgroundImage: `url(${bgNoise})` }}\n          ></div>\n        </div>\n        {homeStarters.map((player, idx) => (\n          <div\n            key={idx}\n            className={css.player}\n            style={{\n              left: `${player.coord[0]}%`,\n              top: `${player.coord[1] / 2}%`\n            }}\n          >\n            <div\n              className={css.playerNumber}\n              style={{ backgroundColor: '#ff4125' }}\n            >\n              {player.number}\n            </div>\n            <div className={css.playerName}>{player.name}</div>\n          </div>\n        ))}\n        {awayStarters.map((player, idx) => (\n          <div\n            key={idx}\n            className={css.player}\n            style={{\n              left: `${player.coord[0]}%`,\n              top: `${50 + player.coord[1] / 2}%`\n            }}\n          >\n            <div\n              className={css.playerNumber}\n              style={{ backgroundColor: '#94000e' }}\n            >\n              {player.number}\n            </div>\n            <div className={css.playerName}>{player.name}</div>\n          </div>\n        ))}\n      </div>\n      <div className={css.team}>\n        <div className={css.teamName}>{away}</div>\n        <div className={css.formation}>{lineup.away.formation}</div>\n      </div>\n      <div className={css.playerList}>\n        <div className={css.playerListTitle}>先发阵容</div>\n        <div className={css.playerTeams}>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{home}</div>\n            {homeStarters.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{away}</div>\n            {awayStarters.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className={css.playerList}>\n        <div className={css.playerListTitle}>替补阵容</div>\n        <div className={css.playerTeams}>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{home}</div>\n            {homeSubstitutes.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n          <div className={css.playerTeam}>\n            <div className={css.playerTeamName}>{away}</div>\n            {awaySubstitutes.map((player, i) => (\n              <Player key={i} player={player} />\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { render } from 'react-dom'\nimport Lineup from './lineup'\nimport './index.css'\n\nconst urlSearchParams = new URLSearchParams(location.search)\nconst { type, id, home, away } = Object.fromEntries(urlSearchParams.entries())\n\nif (type && id) {\n  const Widget = type === 'lineup' ? Lineup : null\n  if (Widget) {\n    const $root = document.getElementById('root')\n    render(<Widget id={id} home={home} away={away} />, $root)\n  }\n}\n\n/* eslint-disable-next-line no-console */\nconsole.log(`${app.env.NAME} - ${app.env.REVISION}`)\n"],"sourceRoot":""}